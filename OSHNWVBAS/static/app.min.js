var app=angular.module("main",["ngRoute","ui.bootstrap","ngAnimate"]);app.config(["$routeProvider","$locationProvider",function(n,t){t.html5Mode(!0);n.when("/",{templateUrl:"/index",controller:"IndexController"}).when("/chat",{templateUrl:"/chat.html",controller:"ChatController"}).otherwise({redirectTo:"/"})}]);app.factory("chatService",["$rootScope",function(n){var t=$.hubConnection(),i;$.connection.hub.logging=!0;i=t.createHubProxy("ChatHub");i.on("addMessage",function(t,i){n.$emit("chat_message",{Name:t,Message:i,Time:new Date})});var r=function(n,t){i.invoke("Send",n,t)},u=function(){t.start()},f=function(){t.stop()};return{start:u,stop:f,send:r}}]);app.controller("NavController",["$scope","$location",function(n,t){n.getClass=function(n){return t.path().substr(0,n.length)==n?n=="/"&&t.path()=="/"?"active":n=="/"?"":"active":""}}]);app.controller("IndexController",["$scope",function(){}]);app.controller("ChatController",["$scope","$location","chatService",function(n,t,i){function r(n){var t=[];return n.Chat.filter(function(n){return t.indexOf(n.Name)!=-1?!1:(t.push(n.Name),!0)})}i.start();n.$parent.$on("chat_message",function(t,i){n.$apply(function(){n.Chat||(n.Chat=[]);n.Chat.length>=5&&n.Chat.shift();n.Chat.push(i);n.Users=r(n)})});n.send=function(){i.send(n.name,n.message);n.message=""};n.$on("$locationChangeStart",function(){i.stop()})}]);
/*
//# sourceMappingURL=app.min.js.map
*/